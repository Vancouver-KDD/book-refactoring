### Chapter 32. Mastering TDD

<br>


<br>

#### How large should your steps be?
  - 각 테스트가 얼마나 커버
  - 리팩토링하는 동안 몇 개의 중간 단계를 거쳐야 하는지
  - 작은 단계를 여러번 진행하고, 일부 단계를 생략하는 실험을 해보자. 자동화된 리팩토링은 시간을 단축시키고 더 많은 실험을 가능하게 한다

<br>

#### What don’t you have to test?
- 두려움이 지루함으로 변할 때까지 계속 테스트
- 조건문, 반복문, 연산, 다형성 을 테스트해라
- 자신이 작성한 코드만
  
#### How do you know if you have good tests?
- Long setup code -> 단순한 assertion을 위해 100줄 이상의 코드를 사용
- Setup duplication -> 여러 테스트에서 동일한 설정 코드를 중복해서 작성해야 하는 상황. 객체들이 서로 강하게 결합되어 있거나 의존성이 높은 구조로 설계되어 있음을 나타냄
- Long running tests
- Fragile tests -> 한 부분이 다른 부분에 영향을 줄 수 있으므로 연결을 끊거나 결합하는 것으로 다시 디자인
  
#### How does TDD lead to frameworks?
- TDD는 처음에는 간단하고 직관적인 방식으로 코드를 작성하는 것을 강조. 빠르게 개발이 진행되고 결함이 적게 발생.
- 이것을 기반으로 하여 두번째 기능이 도입되는데, 리팩토링 모듈화를 통해 중복코드를 제거하게 된다
- 이 두 단계를 변형하여 세번째 기능으로 발전하는데 공통 로직은 재사용, 약간의 조정이 일어나게 된다. 
- 이러한 단계를 거치면 변화에 대해 점진적으로 대응할 수 있는 framework를 개발할 수 있게 된다. 실수를 빠르게 파악하고 수정할 수 있는 능력이 향상되기 때문에. 
  
#### How much feedback do you need?
- 모든 가능한 테스트 케이스를 작성하는 것은 어렵다. 
- 개발 속도와 유지보수를 고려하여 실용적인 측면에서 고려되어야 함
  
#### When should you delete tests?
- 중복된 기능을 테스트한다면?
  - 시스템 동작에 대한 신뢰도를 감소한다면 삭제하지 않는다
  - 다양한 시나리오를 테스트 한다면, 유지(***양수, 음수, 0, 큰 숫자, 작은 숫자에 대한 짝수 여부 확인)
  
#### How do the programming language and environment influence TDD?
- 사용하는 언어에 따라 TDD의 수행이 더 원활할 수 있음.
- 더 많은 실험을 하고 싶은 유혹이 있을 수 있다. 그렇게 할 것인가, 아니면 코드를 검토/반성하는데 시간을 더 쓸 것인가?

#### Can you test drive enormous systems?
- 거대한 시스템에도 적용할 수 있다. 25만 lines의 기능 코드와 25만 lines의 테스트코드가 있었으며 20분 이내에 실행됨.

#### Can you drive development with application-level tests?
- 기존의 TDD를 이용한 개발은 실제 사용자가 원하는 기능과 일치하지 않을 수 있음. 이 때 ATDD를 고려해볼 수 있음
- 하지만 아직 구현되지 않은 기능에 대한 테스트를 어떻게 작성할 것인가? 여러 팀의 많은 사람들이 협력해야 하는 문제점, 테스트와 피드백 사이의 주기가 길어짐
- 이 책에서의 TDD는 개인이 직접 제어할 수 있고 빠르게 대응할 수 있다. 먼저 개인의 TDD를 수행한 다음 확대하는 것이 좋음
  
#### How do you switch to TDD midstream?
- 새로운 코드는 TDD로 작성하고 싶지만, 기존의 코드는 테스트를 고려하지 않은 것일 때...
- 변경 범위를 제한해야 한다. 
- 테스트말고 다른 방법으로 피드백을 얻거나 시스템 수준의 테스트로 일부 신뢰성을 확보해라. 
- 시간이 지나면 변동이 자주 발생하는 부분은 점차 TDD로 보이게 될 것이다. 
  
#### Who is TDD intended for?
- 테스트가 누적/개선되면 시스템의 동작에 대한 신뢰도가 증가. 더 많은 변경이 가능해짐. 
- 프로젝트가 시간이 지남에 따라 좋아지길 원한다면 유용함.

#### Is TDD sensitive to initial conditions?
- 어떤 순서로 테스트를 진행하느냐에 따라 작업 방식이 영향을 받을 수 있다. 
- 작업 단계를 분리할 수 없거나, 예상치 못한 문제가 발생할 수 있음.

#### How does TDD relate to patterns?
- pattern이란 일종의 설계 템플릿으로 볼 수 있으며, 객체지향 패턴, 알고리즘 패턴 등 개발자들이 이전에 경험한 문제에 대한 해결 방법을 캡슐화하고 공유한 것이다.
- 6*9를 할 때 6을 9번 더하는 대신, 기계적으로 계산한다면 나머지 시간에 더 창의적인 일을 할 수 있음.
- 하나의 패턴을 정하고 작은 부분을 TDD를 사용하면서 변형을 시도하면 좀 더 유연하고 확장 가능한 개발이 가능. 서로 보완적인 방법으로 사용하자.
  
#### Why does TDD work?
- 결함 감소 -> 초기에 결함 발견, 수정
- 피드백 루프를 제공
- 점진적으로 기능을 추가하고 변경하기 때문에 유연한 개발
- 독립적인 테스트로 시스템 유지보수 용이

#### What’s with the name?
- Development: 분석, 논리적 설계, 물리적 설계, 구현, 테스트, 검토, 통합, 배포와 같은 포괄적 의미
- Driven: 테스트가 개발을 주도한다. 
- Test: 자동화되고 구체화된 테스트. 코드의 동작을 확인하는 작업
  
#### How does TDD relate to the practices of Extreme Programming?
- XP란? 애자일 소프트웨어 개발 방법론 중 하나. 빠르게 반복적으로 개발, 고객의 피드백 수용.
- Pairing: 동의하지 않을 때 TDD는 동료와의 communication을 돕는 자료가 될 수 있음.
- Work Fresh
- Continuous integration: 작은 테스트 단위는 더 짧은 주기로 테스트를 통합할 수 있다
- Simple design: 필요한 부분만 작성하고 중복 제거
- Refactoring: 시스템의 동작이 변경되지 않았음을 의미. 신뢰도 높아짐
- Continuous delivery: 고객에게 방해없이 코드를 자주 배포. 

#### Darach’s Challenge
- Darach Ennis는 TDD의 범위를 확장하는 데 대한 도전을 제시하고, 이 도전을 통해 GUI 테스트, 분산 객체 테스트, 데이터베이스 스키마 개발, 제3자 코드 및 외부 도구 코드 테스트, BNF로부터 언어 컴파일러/인터프리터 개발까지 가능한지에 대해 challenge 하였음. 
  